---
title: DIR-300NRU и IPoE!
name: dir-300-and-ipoe
---

DIR-300 и IPoE
==============

Немногим более года назад провайдер моих родителей решил изменить способ подключения с, кажется, PPTP или PPPoE (уж и не вспомню) на IPoE. И вот тут внезапно и выяснилось, что с IPoE-то D-Link DIR-300 работать не умеет.

Мне так и не удалось заставить работать роутер D-Link DIR-300NRU (rev. B1) под штатной прошивкой: он упорно не мог получить сетевые настройки по DHCP. После некоторого безуспешного поиска было решено «шиться» алтернативной прошивкой. Случайным образом выбор пал на DD-WRT.

Я прошил роутер этой прошивкой: <http://dd-wrt.com/routerdb/de/download/D-Link/DIR-300/B1/dlink-dir300b-factory-webflash.bin/3577> стандартным способом через веб-интерфейс, настроил DD-WRT. И интернет заработал!

Но сладость победы омрачали сигнальные лампочки питания и интернета, непрерывно горевшие жёлтым. Поиск! Я вписал следующие команды в автозагрузку роутера, чтобы сигнальные лампочки больше не горели жёлтым:

```bash
sleep 15 ; gpio disable 9; gpio enable 8; gpio disable 11 ; gpio enable 13
while : ; do sleep 15; ping google.com -c 1 && (gpio disable 12; gpio enable 14;) || (gpio enable 12; gpio disable 14;) done &
```

Вот уже больше года полёт нормальный.

Ссылки на материалы:

 * Официальный сайт DD-WRT: <http://dd-wrt.com>
 * Мануал по обновлению: <http://dd-wrt.com/wiki/index.php/DIR-600>
 * Проблема «оранжевых лампочек»: <http://www.dd-wrt.com/phpBB2/viewtopic.php?p=696015>
